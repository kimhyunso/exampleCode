{% extends 'base.html' %}

{% block content %}
<h1>{{list.title}}</h1>
<p>by - {{list.user}}</p>
{{list.user.mbti}}

{% if request.user == question.user %}
<div>
    <a href="{% url 'polls:update_question' list.pk %}">
        <button>수정</button>
    </a>
</div>
<div>
    <form action="{% url 'polls:delete_question' list.pk %}" method="post">
        {% csrf_token %}
        <button>삭제</button>
    </form>
</div>
{% endif %}

<form action="{% url 'polls:reply_create' list.pk %}" method="post">
    {% csrf_token %}
    {{form.as_p}}
    <button>댓글달기</button>
</form>

<ul>
    {% for comment in list.reply_set.all  %}
    <li>
        {{comment.content}} - ({{comment.vote}}) by-{{comment.user}}
        {% if request.user != comment.user %}
        <form action="{% url 'polls:reply_upvote' list.pk comment.pk %}" method="post" style="display:inline-block;">
            {% csrf_token %}
            <button>+1</button>
        </form>
        {%else%}
        <form action="{% url 'polls:reply_delete' list.pk comment.pk %}" method="post" style="display:inline-block;">
            {% csrf_token %}
            <button onclick="return confirm('삭제하시겠습니까?');">삭제</button>
        </form>
        {% endif %}
    </li>
    {% endfor %}
</ul>

{% endblock content %}




